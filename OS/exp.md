# 操作系统课程设计实验报告

> 14051435 叶梅北宁

## 实验一 基于DOS的多任务操作系统

### 实验要求
1. 实现线程的创建和线程的调度
2. 实现线程同步机制、休眠、唤醒
3. 实现线程间通信

### 实验过程

#### 实验代码 
[我的GitHub](https://github.com/LostMoonkin/HomeWork/tree/master/OS)

### 实验要点 ／ 总结

1. 在实验过程中，实现了一个最大堆(优先队列)的数据结构用来存储线程信息，并且完成线程的优化了线程按优先级调度的复杂度。
2. 线程的优先级并不仅仅是固定的优先级，这个优先级应该是动态实现的。动态地对每个线程分配时间片，而不是分配一个固定的等级。
3. 在线程的调度实验中，老师问了一个问题：为什么每次的输出顺序不一样？会出现abcd bacd abbcd这样的情况，当时给出的答案是每次循环的执行次数不同，暂停线程的时候停在了不同的循环位置。但是，之后思考了一些更深的原因：***即使是同样的语句，每次执行需要的CPU cycle也是不同的***，涉及到CPU调度中锁，缓存命中，内存缓存同步的问题，造成了相同的CPU指令需要的执行时间也不会完全相同，所以造成了相同时间内循环的次数不同。
4. 进程的同步，生产者、消费者问题的解决没遇到啥问题，跳过。
5. 在做进程间通讯的时候，一开始调试了很久都没有成功，总是输出乱码。也没搞清楚原因。后来突然有一次输出了***Turbo C2.0 CopyRight... ...***这样的字符串，我才明白：卧槽，内存溢出了。访问到系统的内存空间了，才回去仔细看了一下代码，发现压根就没申请动态的内存。。。。

### DEBUG真是太麻烦了。。。 。。。

## 实验二 基于i节点的文件系统

### 实验要求
完成一个基于i节点的基础文件系统。

### 实验过程

#### 实验代码 
[我的GitHub](https://github.com/LostMoonkin/HomeWork/tree/master/OS)

### 实验要点 ／ 总结
1. 我只知道我一开始脑子处于秀逗状态，直接把I节点存在文件块里。现在想起来真是。。。 。。。
2. ., ..这两个特殊目录应该是以子目录的形式存在，而不是用一定的规则写在“CD”命令中。
3. 简单文件系统其实并不复杂，虽然代码多了一点，但是只要掌握好结构，写起来比第一个实验快多了。
4. 这次是在图形化界面下写的，配置好GDB之后调试起来方便多了。也没遇到啥大的问题。

